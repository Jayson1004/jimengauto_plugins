# 即梦批量上传助手

一个Chrome浏览器插件，用于在即梦官网上批量提交分镜任务，提高创作效率。

## 功能特点

- 🚀 **批量上传**：支持一次性配置多个分镜并自动提交
- 📱 **悬浮窗界面**：不干扰原页面操作，可拖拽移动
- 🎯 **智能排序**：支持拖拽调整分镜提交顺序
- ⏱️ **间隔控制**：可自定义提交间隔时间（4-15秒）
- 🔄 **自动清理**：每次提交前自动清除上一个分镜内容
- 📊 **进度显示**：实时显示当前上传进度
- ⏸️ **灵活控制**：支持暂停/继续/停止操作

 1. 全自动角色提取：无论您是导入CSV、手动添加还是修改分镜，插件都会立即扫描提示词，自动更新顶部的角色列表。
   2. 角色图片管理：您现在可以为列表中的每个角色上传一张参考图片。图片会显示在角色名旁边，并可以随时更换或删除。
   3. 智能图片上传：在“开始上传”后，插件会自动检测当前分镜的提示词中提到了哪些角色，然后自动将这些角色的参考图与分镜自身的
      图片一并上传。这实现了真正的角色固定，确保了角色在不同分镜中的一致性。

## 安装方法

### 开发者模式安装

1. 下载或克隆此项目到本地
2. 打开Chrome浏览器，进入扩展程序页面 (`chrome://extensions/`)
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 插件安装完成

### 使用方法

1. **打开即梦官网**：访问 [jimeng.ai](https://jimeng.ai)
2. **启动插件**：点击浏览器工具栏中的插件图标
3. **打开控制面板**：在弹窗中点击"打开控制面板"
4. **添加分镜**：
   - 单个添加：点击"添加分镜"按钮
   - 批量导入：点击"批量导入"选择图片文件
5. **设置内容**：
   - 为每个分镜上传1-4张参考图
   - 填写对应的提示词
   - 可拖拽调整分镜顺序
6. **配置参数**：设置提交间隔时间（推荐8-12秒）
7. **开始上传**：点击"开始上传"按钮，插件将自动批量提交

## 界面说明

### 悬浮窗布局
- **顶部**：标题栏和最小化按钮
- **控制区**：添加分镜、批量导入按钮
- **设置区**：提交间隔时间配置
- **分镜列表**：显示所有分镜项目，支持拖拽排序
- **进度条**：显示当前上传进度
- **操作按钮**：开始、暂停、停止、清空

### 分镜状态
- 🟡 **待上传**：分镜已添加，等待上传
- 🟠 **上传中**：正在处理当前分镜
- 🟢 **已完成**：分镜上传成功
- 🔴 **失败**：上传失败，将自动跳过

## 技术实现

### 核心功能
- **DOM自动化**：自动操作即梦页面元素
- **文件处理**：支持图片文件的批量导入
- **状态管理**：实时跟踪每个分镜的处理状态
- **错误处理**：自动跳过失败的分镜，继续处理

### 自动化流程
1. 清除上一个分镜的参考图（点击×按钮）
2. 清空提示词输入框（全选删除）
3. 上传当前分镜的参考图
4. 填写提示词到文本框
5. 点击生成按钮
6. 等待设定间隔时间
7. 处理下一个分镜

## 注意事项

- ⚠️ **网络稳定**：请确保网络连接稳定
- ⚠️ **间隔设置**：建议设置合适的提交间隔，避免被限制
- ⚠️ **避免干扰**：上传过程中请勿手动操作即梦页面
- ⚠️ **浏览器兼容**：目前仅支持Chrome浏览器

## 文件结构

```
├── manifest.json          # 插件配置文件
├── content.js            # 内容脚本（主要功能）
├── styles.css            # 样式文件
├── background.js         # 后台脚本
├── popup.html           # 弹窗页面
├── popup.js             # 弹窗脚本
├── README.md            # 说明文档
└── icons/               # 图标文件夹
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 开发说明

### 主要类和方法

- `JimengBatchUploader`：主要功能类
- `createFloatingWindow()`：创建悬浮窗界面
- `uploadStoryboard()`：上传单个分镜
- `clearPreviousContent()`：清理之前的内容
- `processNextStoryboard()`：处理下一个分镜

### 扩展功能

如需添加新功能，可以在以下方面扩展：
- 模板功能：保存常用的分镜配置
- 批量编辑：批量修改提示词
- 导出功能：导出分镜配置
- 统计功能：上传成功率统计

## 更新日志

### v1.0.0
- 初始版本发布
- 支持批量分镜上传
- 悬浮窗界面
- 自动化提交流程
- 进度显示和状态管理

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！