# 即梦批量上传插件需求文档

## 项目概述
开发一个浏览器插件，用于在即梦官网上批量提交分镜任务，提高工作效率。

## 核心需求
- **目标平台**：浏览器插件（Chrome Extension）
- **使用场景**：在即梦官网页面上使用
- **界面形式**：悬浮窗形式

## 确定的功能需求

### 1. 基础功能
- ✅ 浏览器插件形式
- ✅ 悬浮窗界面
- ✅ 不调用即梦API（直接在官网操作）
- ✅ 不监控生成状态（用户在官网查看）
- ✅ 不自动下载图片（用户手动下载）

### 2. 核心功能
- 批量预设分镜数据（参考图 + 提示词）
- 自动化提交到即梦官网
- 队列管理和提交控制

## 详细功能设计

### 界面设计
- **悬浮窗大小**：320x480 像素（合适的工作区域）
- **位置**：固定在页面右下角
- **交互**：包含最小化按钮，最小化后显示小图标
- **透明度**：正常显示，无需透明度调节

### 分镜数据管理
- **添加方式**：
  - 手动添加：逐个创建分镜项
  - 批量导入：从文件夹选择图片，批量设置提示词
- **数据结构**：
  - 每个分镜：1-4张参考图（最少1张）
  - 分镜命名：分镜1、分镜2、分镜3...（自动编号）
  - 支持调整分镜顺序
- **提示词管理**：每个分镜对应一个提示词文本

### 提交流程控制
- **提交间隔**：4-15秒可调节（用户自定义）
- **自动提交流程**：
  1. 清除上一个分镜的内容（提示词 + 参考图）
  2. 上传当前分镜的参考图到即梦上传区域
  3. 填写提示词到文本框
  4. 点击生成按钮
  5. 等待设定间隔时间
  6. 自动进行下一个分镜
- **控制按钮**：暂停/继续按钮
- **进度显示**：显示"第X个分镜，共Y个分镜"
- **错误处理**：分镜处理失败时跳过继续下个分镜
- **分镜排序**：支持拖拽调整分镜顺序

### 与即梦网页交互
- **图片清理**：点击每张参考图右上角的"×"按钮删除
- **提示词清理**：全选文本输入框内容并删除
- **图片上传**：自动上传到即梦的"+"上传区域
- **提示词填写**：自动填写到底部文本输入框
- **提交触发**：自动点击生成按钮

### 数据管理
- **临时存储**：分镜数据仅在当前会话中保存
- **清空功能**：支持一键清空所有分镜数据
- **无持久化**：关闭页面后数据不保存

### 用户界面布局
1. **顶部**：标题栏 + 最小化按钮
2. **分镜列表区域**：显示所有分镜项目
3. **控制面板**：
   - 添加分镜按钮
   - 批量导入按钮
   - 提交间隔设置
   - 开始/暂停/停止按钮
4. **状态显示**：当前进度和状态

## 下一步
开始技术实现和代码编写。